<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora</title>
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}"/>
</head>
<body>
<main role="main" class="container">
  <div class="form-conversion">
    <h1>Calculadora Simple</h1>
    <form th:action="@{/calcular}" method="post" th:object="${calculadoraData}">
      <div class="form-group">
        <label for="operando1">Operando 1:</label>
        <input type="number" class="form-control" id="operando1" th:field="*{operando1}" required>
      </div>
      <div class="form-group">
        <label for="operando2">Operando 2:</label>
        <input type="number" class="form-control" id="operando2" th:field="*{operando2}" required>
      </div>
      <div class="form-group">
        <label for="operador">Operación:</label>
        <select class="form-control" id="operador" th:field="*{operador}" required>
          <option value="+">Sumar</option>
          <option value="-">Restar</option>
          <option value="*">Multiplicar</option>
          <option value="/">Dividir</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Calcular</button>
      <a th:href="@{'/calculadora'}" class="btn btn-outline-dark btn-light">Resetear</a>
      <a th:href="@{'/historial'}" class="btn btn-outline-dark btn-light">Historial</a>
      <a th:href="@{'/historial-fecha'}" class="btn btn-outline-dark btn-light">Historial por fecha</a>
    </form>
    <div th:if="${resultadoFinal != null}">
      <h2>Resultado: <span th:text="${resultadoFinal}"></span></h2>
    </div>
    <div th:if="${error != null}">
      <h2>Error: <span th:text="${error}"></span></h2>
    </div>
    <div>
      <h2>Historial de Cálculos</h2>

      <ul>
        <li th:each="calculo : ${historial}">
          <span th:text="${calculo.operando1}"></span>
          <span th:text="${calculo.operador}"></span>
          <span th:text="${calculo.operando2}"></span> =
          <span th:text="${calculo.resultado}"></span>
        </li>
      </ul>
    </div>
  </div>
</main>
<script type="text/javascript" th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>
</body>
</html>

